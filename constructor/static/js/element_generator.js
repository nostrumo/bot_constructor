var card = '<div class="col-xxl-6 card_size col-xl-6 col-md-12">\n' +
    '                    <div class="card info-card grey-card">\n' +
    '                        <div class="card-header">\n' +
    '                            <div class="d-flex align-items-center">\n' +
    '                                \n' +
    '                                <h6>Screen title</h6>\n' +
    '                                <div class="ms-auto">\n' +
    '                                </div>\n' +
    '                                <div class="info_icon d-flex align-items-center justify-content-center"><i\n' +
    '                                        class="bi bi-trash mx-3"></i>\n' +
    '                                </div>\n' +
    '                                <div class="info_icon d-flex align-items-center justify-content-center"><i\n' +
    '                                        class="bi bi-gear mx-3"></i>\n' +
    '                                </div>\n' +
    '                            </div>\n' +
    '                        </div>\n' +
    '                        <div class="card-body">\n' +
    '                            <div class="d-flex align-items-end justify-content-center action_block">\n' +
    '                                <div class="emoji bot_emoji">\n' +
    '                                    <img src="/static/img/media/robot_emoji.png">\n' +
    '                                </div>\n' +
    '                                <div class="block-action block-action-bot">\n' +
    '                                    <div class="action_title d-flex align-content-center justify-content-between">\n' +
    '                                        <div class="d-flex align-items-center">\n' +
    '                                            <i class="bi bi-chat mx-2"></i>\n' +
    '                                            <span>Bot request</span>\n' +
    '                                        </div>\n' +
    '                                        <div class="ms-auto d-flex align-items-center">\n' +
    '                                            <div class="info_icon d-flex align-items-center justify-content-center"><i\n' +
    '                                                    class="bi bi-trash mx-3"></i>\n' +
    '                                            </div>\n' +
    '                                            <div class="info_icon texts_modal d-flex align-items-center justify-content-center"><i\n' +
    '                                                    class="bi bi-gear mx-3"></i>\n' +
    '                                            </div>\n' +
    '                                        </div>\n' +
    '                                    </div>\n' +
    '                                    <div class="action_body text-field">\n' +
    '                                        <div>Some information data for this block will appear randomly andd i dont know\n' +
    '                                            what\n' +
    '                                            can i add else for this block...\n' +
    '                                        </div>\n' +
    '                                        <div class="additional_info">1 from <span class="additional_info_list ">3 text samples</span>\n' +
    '                                       texts_modal </div>\n' +
    '                                    </div>\n' +
    '                                </div>\n' +
    '                            </div>\n' +
    '                            <div class="d-flex align-items-end justify-content-center action_block">\n' +
    '                                <div class="block-action block-action-user">\n' +
    '                                    <div class="action_title d-flex align-content-center justify-content-between">\n' +
    '                                        <div class="d-flex align-items-center">\n' +
    '                                            <i class="bi bi-inbox mx-2"></i>\n' +
    '                                            <span>User response</span>\n' +
    '                                        </div>\n' +
    '                                        <div class="ms-auto d-flex align-items-center">\n' +
    '                                            <div class="info_icon d-flex align-items-center justify-content-center"><i\n' +
    '                                                    class="bi bi-trash mx-3"></i>\n' +
    '                                            </div>\n' +
    '                                            <div class="info_icon d-flex align-items-center justify-content-center"><i\n' +
    '                                                    class="bi bi-gear mx-3"></i>\n' +
    '                                            </div>\n' +
    '                                        </div>\n' +
    '                                    </div>\n' +
    '                                    <div class="action_body radius-5">\n' +
    '                                        <div class="intent-element d-flex justify-content-between border-bottom">\n' +
    '                                            <div class="intent-content">$NAME</div>\n' +
    '                                            <div class="additional_info p-0">Connected to <span\n' +
    '                                                    class="additional_info_list">Hello form</span>\n' +
    '                                            </div>\n' +
    '                                        </div>\n' +
    '                                        <div class="intent-element d-flex justify-content-between">\n' +
    '                                            <div class="intent-content">Any other feedback</div>\n' +
    '                                            <div class="additional_info p-0">Connected to <span\n' +
    '                                                    class="additional_info_list">Hello form</span>\n' +
    '                                            </div>\n' +
    '                                        </div>\n' +
    '                                    </div>\n' +
    '                                </div>\n' +
    '                                <div class="emoji user_emoji">\n' +
    '                                    <img src="/static/img/media/person_1f9d1.png">\n' +
    '                                </div>\n' +
    '                            </div>\n' +
    '                            <div class="delimiter"></div>\n' +
    '                            <div class="block-action">\n' +
    '                                <div class="action_title d-flex align-content-center justify-content-between">\n' +
    '                                    <div class="d-flex align-items-center">\n' +
    '                                        <i class="bi bi-mouse mx-2"></i>\n' +
    '                                        <span>Keyboard button</span>\n' +
    '                                    </div>\n' +
    '                                    <div class="ms-auto d-flex align-items-center">\n' +
    '                                        <div class="info_icon d-flex align-items-center justify-content-center"><i\n' +
    '                                                class="bi bi-trash mx-3"></i>\n' +
    '                                        </div>\n' +
    '                                        <div class="info_icon d-flex align-items-center justify-content-center"><i\n' +
    '                                                class="bi bi-gear mx-3"></i>\n' +
    '                                        </div>\n' +
    '                                    </div>\n' +
    '                                </div>\n' +
    '                                <div class="action_body text-field">\n' +
    '                                    <div>\n' +
    '                                        <div>\n' +
    '                                            Hello I want to buy susi\n' +
    '                                        </div>\n' +
    '                                        <div class="additional_info">Connected to <span\n' +
    '                                                class="additional_info_list">Hello form</span></div>\n' +
    '                                    </div>\n' +
    '                                </div>\n' +
    '                            </div>\n' +
    '                            <div class="row">\n' +
    '                                <div class="col-xl-6 col-sm-12">\n' +
    '                                    <a class="add_action" data-toggle="modal" href="javascript:void(0)">\n' +
    '                                        <div class="dotted radius-5 d-flex align-items-center p-3 my-3">\n' +
    '                                            <div class="button-icon rounded-circle d-flex align-items-center justify-content-center">\n' +
    '                                                <i class="bi bi-plus"></i>\n' +
    '                                            </div>\n' +
    '                                            <div class="ps-3">\n' +
    '                                        <span\n' +
    '                                                class="text-muted small">Add an action</span>\n' +
    '                                            </div>\n' +
    '                                        </div>\n' +
    '                                    </a>\n' +
    '                                </div>\n' +
    '                                <div class="col-xl-6 col-sm-12">\n' +
    '                                    <a class="add_button">\n' +
    '                                        <div class="dotted radius-5 d-flex align-items-center p-3 my-3">\n' +
    '                                            <div class="button-icon rounded-circle d-flex align-items-center justify-content-center">\n' +
    '                                                <i class="bi bi-plus"></i>\n' +
    '                                            </div>\n' +
    '                                            <div class="ps-3">\n' +
    '                                        <span\n' +
    '                                                class="text-muted small">Add a button</span>\n' +
    '                                            </div>\n' +
    '                                        </div>\n' +
    '                                    </a>\n' +
    '                                </div>\n' +
    '                            </div>\n' +
    '                        </div>\n' +
    '                    </div>\n' +
    '                </div>'
var obj = jQuery.parseJSON($('#form-data').html());
var save_obj = {}
var screens = {}
var screens_r = {}

function parse_JSON() {
    $.each(obj, function (index_screen, screen) {
        screens[index_screen] = screen.screen_name
        screens_r[screen.screen_name] = index_screen
    })
    $.each(obj, function (index_screen, screen) {
        var screen_id = index_screen
        var screen_name = screen.screen_name
        var components = screen.components
        // var supplier_content = screen.bot_message.data_type
        // var content = screen.bot_message.content_data
        var tmp_dict = {}
        var type_dict = {}
        var ___ = card_structure_start(screen_id, screen_name);
        var basic_code = ___[0];
        var basic_code_end = ___[1];
        var intent = {};
        var html_elements = [basic_code]

        $.each(components, function (component_type, component) {
            if (component_type === "bot_message") {
                var bot_block_html = ''

                $.each(component, function (component_ind, message_component) {
                    var tmp_array = []
                    if (message_component.data_type === "text_data") {
                        var prevision = screen.components.bot_message[component_ind].content_data[0]
                        $.each(screen.components.bot_message[component_ind].content_data, function (index_content, content_data) {
                            tmp_array.push(content_data)
                        });
                        if (component_ind === 0) {
                            var additional_class = ''
                        } else {
                            var additional_class = 'block-action-bot_middle'
                        }
                        bot_block_html += bot_message(screen_id, prevision, screen.components.bot_message[component_ind].content_data.length, additional_class, component_ind)
                    } else if (message_component.data_type === "any") {
                    }
                    tmp_dict[component_ind] = tmp_array
                    type_dict[component_ind] = message_component.data_type

                })
                html_elements.push(bot_block(bot_block_html))
            } else if (component_type === "person_message") {
                html_elements.push(user_response(screen_id, screen.components.person_message.content_data))
                intent = screen.components.person_message.content_data
            } else if (component_type === "keyboard") {
                html_elements.push(delimiter())
                var keyboard_data = keyboard()
                html_elements.push(keyboard_data[0])
                $.each(screen.components.keyboard, function (ind, key) {
                    var prevision = key.key_name
                    var connected = obj[key.connection].screen_name
                    var screen_id = key.connection
                    if (ind == screen.components.keyboard.length - 1) {
                        var flag = false
                    } else {
                        var flag = true
                    }
                    html_elements.push(keyboard_key(screen_id, connected, prevision, screens, flag))

                });
                html_elements.push(keyboard_data[1])

            } else {
            }
        });
        html_elements.push(basic_code_end)
        var html_array = ''
        $.each(html_elements, function (index_element, html_code) {
            html_array += html_code
        });
        save_obj[screen_id] = {
            'data_modal': {'data': tmp_dict, 'modal_type': type_dict},
            'user_data': intent,
            'screens': screen_array(screens),
            'html': html_array
        }

    });
}

parse_JSON()
console.log(save_obj)